// // // // // // src/sections/Toolkit_Journey.jsx
// // // // // import React, { Suspense } from "react";
// // // // // import { Canvas } from "@react-three/fiber";
// // // // // import { ToolkitGalaxy } from "../components/ToolkitGalaxy";

// // // // // const ToolkitJourney = () => {
// // // // //   return (
// // // // //     <section
// // // // //       id="toolkit-journey"
// // // // //       className="relative w-full h-[300vh] bg-black"
// // // // //     >
// // // // //       <div className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden">
// // // // //         <div className="absolute top-[20vh] text-center z-10 c-space">
// // // // //           <h2 className="text-4xl font-bold md:text-6xl text-background">
// // // // //             The Toolkit
// // // // //           </h2>
// // // // //           <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md:text-xl">
// // // // //             Flying through the galaxy of technologies I use to build robust and
// // // // //             scalable applications.
// // // // //           </p>
// // // // //         </div>
// // // // //         <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
// // // // //           <Suspense fallback={null}>
// // // // //             <fog attach="fog" args={["#000000", 15, 25]} />
// // // // //             <ambientLight intensity={1.5} />
// // // // //             <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
// // // // //             <ToolkitGalaxy />
// // // // //           </Suspense>
// // // // //         </Canvas>
// // // // //       </div>
// // // // //     </section>
// // // // //   );
// // // // // };

// // // // // export default ToolkitJourney;

// // // // // src/sections/Toolkit_Journey.jsx
// // // // import React, { Suspense } from "react";
// // // // import { Canvas } from "@react-three/fiber";
// // // // import { ToolkitGalaxy } from "../components/ToolkitGalaxy";

// // // // const ToolkitJourney = () => {
// // // //   return (
// // // //     <section
// // // //       id="toolkit-journey"
// // // //       className="relative w-full h-[300vh] bg-black"
// // // //     >
// // // //       <div className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden">
// // // //         <div className="absolute top-[20vh] text-center z-10 c-space">
// // // //           <h2 className="text-4xl font-bold md:text-6xl text-background">
// // // //             The Toolkit
// // // //           </h2>
// // // //           <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md:text-xl">
// // // //             Flying through the galaxy of technologies I use to build robust and
// // // //             scalable applications.
// // // //           </p>
// // // //         </div>
// // // //         <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
// // // //           <Suspense fallback={null}>
// // // //             <fog attach="fog" args={["#000000", 15, 25]} />
// // // //             <ambientLight intensity={1.5} />
// // // //             <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
// // // //             <ToolkitGalaxy />
// // // //           </Suspense>
// // // //         </Canvas>
// // // //       </div>
// // // //     </section>
// // // //   );
// // // // };

// // // // export default ToolkitJourney;

// // // import React, { Suspense } from "react";
// // // import { Canvas } from "@react-three/fiber";
// // // import { ToolkitGalaxy } from "../components/ToolkitGalaxy";

// // // const ToolkitJourney = () => {
// // //   return (
// // //     <section
// // //       id="toolkit-journey"
// // //       className="relative w-full h-[300vh] bg-black"
// // //     >
// // //       <div className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden">
// // //         <div className="absolute top-[20vh] text-center z-10 c-space">
// // //           <h2 className="text-4xl font-bold md:text-6xl text-background">
// // //             The Toolkit
// // //           </h2>
// // //           <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md:text-xl">
// // //             Flying through the galaxy of technologies I use to build robust and
// // //             scalable applications.
// // //           </p>
// // //         </div>
// // //         <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
// // //           <Suspense fallback={null}>
// // //             <fog attach="fog" args={["#000000", 15, 25]} />
// // //             <ambientLight intensity={1.5} />
// // //             <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
// // //             <ToolkitGalaxy />
// // //           </Suspense>
// // //         </Canvas>
// // //       </div>
// // //     </section>
// // //   );
// // // };

// // // export default ToolkitJourney;

// // import React, { Suspense } from "react";
// // import { Canvas } from "@react-three/fiber";
// // import { ToolkitGalaxy } from "../components/ToolkitGalaxy";

// // const ToolkitJourney = () => {
// //   return (
// //     <section
// //       id="toolkit-journey"
// //       className="relative w-full h-[400vh] bg-black" // <-- DIUBAH DARI 300vh
// //     >
// //       <div className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden">
// //         <div className="absolute top-[20vh] text-center z-10 c-space">
// //           <h2 className="text-4xl font-bold md:text-6xl text-background">
// //             The Toolkit
// //           </h2>
// //           <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md-text-xl">
// //             Flying through the galaxy of technologies I use to build robust and
// //             scalable applications.
// //           </p>
// //         </div>
// //         <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
// //           <Suspense fallback={null}>
// //             <fog attach="fog" args={["#000000", 15, 25]} />
// //             <ambientLight intensity={1.5} />
// //             <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
// //             <ToolkitGalaxy />
// //           </Suspense>
// //         </Canvas>
// //       </div>
// //     </section>
// //   );
// // };

// // export default ToolkitJourney;

// import React, { Suspense, useRef, useLayoutEffect } from "react";
// import { Canvas } from "@react-three/fiber";
// import { ToolkitGalaxy } from "../components/ToolkitGalaxy";
// import gsap from "gsap";
// import { ScrollTrigger } from "gsap/ScrollTrigger";

// gsap.registerPlugin(ScrollTrigger);

// const ToolkitJourney = () => {
//   const sectionRef = useRef(null);
//   const canvasContainerRef = useRef(null); // Ref baru untuk kontainer kanvas

//   useLayoutEffect(() => {
//     const ctx = gsap.context(() => {
//       if (canvasContainerRef.current) {
//         // --- LOGIKA BARU UNTUK FADE IN & FADE OUT ---

//         // Animasi Fade In di awal section
//         gsap.from(canvasContainerRef.current, {
//           opacity: 0,
//           scrollTrigger: {
//             trigger: sectionRef.current,
//             start: "top 80%", // Mulai fade in saat section masuk
//             end: "top top", // Selesai saat section di puncak
//             scrub: 1.5,
//           },
//         });

//         // Animasi Fade Out di akhir section
//         gsap.to(canvasContainerRef.current, {
//           opacity: 0,
//           scrollTrigger: {
//             trigger: sectionRef.current,
//             start: "bottom bottom", // Mulai fade out saat section akan berakhir
//             end: "bottom top", // Selesai saat section meninggalkan viewport
//             scrub: 1.5,
//           },
//         });
//       }
//     }, sectionRef);
//     return () => ctx.revert();
//   }, []);

//   return (
//     <section
//       ref={sectionRef}
//       id="toolkit-journey"
//       className="relative w-full h-[400vh] bg-black"
//     >
//       <div
//         ref={canvasContainerRef} // Tambahkan ref di sini
//         className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden"
//       >
//         <div className="absolute top-[20vh] text-center z-10 c-space">
//           <h2 className="text-4xl font-bold md:text-6xl text-background">
//             The Toolkit
//           </h2>
//           <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md-text-xl">
//             Flying through the galaxy of technologies I use to build robust and
//             scalable applications.
//           </p>
//         </div>
//         <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
//           <Suspense fallback={null}>
//             <fog attach="fog" args={["#000000", 15, 25]} />
//             <ambientLight intensity={1.5} />
//             <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
//             <ToolkitGalaxy />
//           </Suspense>
//         </Canvas>
//       </div>
//     </section>
//   );
// };

// export default ToolkitJourney;

import React, { Suspense, useRef, useLayoutEffect } from "react";
import { Canvas } from "@react-three/fiber";
import { ToolkitGalaxy } from "../components/ToolkitGalaxy";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);

const ToolkitJourneyComponent = () => {
  const sectionRef = useRef(null);
  const canvasContainerRef = useRef(null);

  useLayoutEffect(() => {
    const ctx = gsap.context(() => {
      if (canvasContainerRef.current) {
        gsap.from(canvasContainerRef.current, {
          opacity: 0,
          scrollTrigger: {
            trigger: sectionRef.current,
            start: "top 80%",
            end: "top top",
            scrub: 1.5,
            invalidateOnRefresh: true,
          },
        });

        gsap.to(canvasContainerRef.current, {
          opacity: 0,
          scrollTrigger: {
            trigger: sectionRef.current,
            start: "bottom bottom",
            end: "bottom top",
            scrub: 1.5,
            invalidateOnRefresh: true,
          },
        });
      }
    }, sectionRef);
    return () => ctx.revert();
  }, []);

  return (
    <section
      ref={sectionRef}
      id="toolkit-journey"
      className="relative w-full h-[400vh] bg-black"
    >
      <div
        ref={canvasContainerRef}
        className="sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden gpu-layer"
      >
        <div className="absolute top-[20vh] text-center z-10 c-space">
          <h2 className="text-4xl font-bold md:text-6xl text-background">
            The Toolkit
          </h2>
          <p className="max-w-xl mx-auto mt-4 text-lg text-gray-300 md-text-xl">
            Flying through the galaxy of technologies I use to build robust and
            scalable applications.
          </p>
        </div>
        <Canvas camera={{ position: [0, 0, 12], fov: 75 }}>
          <Suspense fallback={null}>
            <fog attach="fog" args={["#000000", 15, 25]} />
            <ambientLight intensity={1.5} />
            <pointLight position={[0, 0, 15]} intensity={100} color="#A5B4FC" />
            <ToolkitGalaxy />
          </Suspense>
        </Canvas>
      </div>
    </section>
  );
};

const ToolkitJourney = React.memo(ToolkitJourneyComponent);
export default ToolkitJourney;
