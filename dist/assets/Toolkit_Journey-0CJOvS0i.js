import{V as B,u as G,b as q,T as W,a,c as V,_ as O,e as se,C as ce,M as ge,d as A,f as ie,D as Q,R as ve,h as ue,i as he,Q as N,t as H,g as T,j as p,S as le,k as ye}from"./index-Cg_f2MYn.js";import{s as xe,v as we}from"./constants-Dcqz0PSu.js";function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(r){I(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}new B;new B;function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var w=function e(t,n,r){var o=this;fe(this,e),I(this,"dot2",function(s,u){return o.x*s+o.y*u}),I(this,"dot3",function(s,u,d){return o.x*s+o.y*u+o.z*d}),this.x=t,this.y=n,this.z=r},be=[new w(1,1,0),new w(-1,1,0),new w(1,-1,0),new w(-1,-1,0),new w(1,0,1),new w(-1,0,1),new w(1,0,-1),new w(-1,0,-1),new w(0,1,1),new w(0,-1,1),new w(0,1,-1),new w(0,-1,-1)],X=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Y=new Array(512),Z=new Array(512),Me=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var n=0;n<256;n++){var r;n&1?r=X[n]^t&255:r=X[n]^t>>8&255,Y[n]=Y[n+256]=r,Z[n]=Z[n+256]=be[r%12]}};Me(0);function Ee(e){if(typeof e=="number")e=Math.abs(e);else if(typeof e=="string"){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return e===0&&(e=311),e}function ee(e){var t=Ee(e);return function(){var n=t*48271%2147483647;return t=n,n/2147483647}}var je=function e(t){var n=this;fe(this,e),I(this,"seed",0),I(this,"init",function(r){n.seed=r,n.value=ee(r)}),I(this,"value",ee(this.seed)),this.init(t)},Oe=new je(Math.random()),Re={radius:1,center:[0,0,0]};function Ce(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oe,r=K(K({},Re),t),o=r.radius,s=r.center,u=0;u<e.length;u+=3){var d=Math.pow(n.value(),.3333333333333333),f=n.value()*2-1,v=n.value()*2-1,y=n.value()*2-1,l=Math.sqrt(f*f+v*v+y*y);f=d*f/l,v=d*v/l,y=d*y/l,e[u]=f*o+s[0],e[u+1]=v*o+s[1],e[u+2]=y*o+s[2]}return e}const _=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!="function";function L(e,t){const n=G(s=>s.gl),r=q(W,_(e)?Object.values(e):e);return a.useLayoutEffect(()=>{t==null||t(r)},[t]),a.useEffect(()=>{if("initTexture"in n){let s=[];Array.isArray(r)?s=r:r instanceof V?s=[r]:_(r)&&(s=Object.values(r)),s.forEach(u=>{u instanceof V&&n.initTexture(u)})}},[n,r]),a.useMemo(()=>{if(_(e)){const s={};let u=0;for(const d in e)s[d]=r[u++];return s}else return r},[e,r])}L.preload=e=>q.preload(W,e);L.clear=e=>q.clear(W,e);const te=xe({color:new ce("white"),scale:new B(1,1),imageBounds:new B(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${we>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),me=a.forwardRef(({children:e,color:t,segments:n=1,scale:r=1,zoom:o=1,grayscale:s=0,opacity:u=1,radius:d=0,texture:f,toneMapped:v,transparent:y,side:l,...b},P)=>{se({ImageMaterial:te});const g=a.useRef(null),M=G(c=>c.size),x=Array.isArray(r)?[r[0],r[1]]:[r,r],m=[f.image.width,f.image.height],i=Math.max(M.width,M.height);return a.useImperativeHandle(P,()=>g.current,[]),a.useLayoutEffect(()=>{g.current.geometry.parameters&&g.current.material.scale.set(x[0]*g.current.geometry.parameters.width,x[1]*g.current.geometry.parameters.height)},[x[0],x[1]]),a.createElement("mesh",O({ref:g,scale:Array.isArray(r)?[...r,1]:r},b),a.createElement("planeGeometry",{args:[1,1,n,n]}),a.createElement("imageMaterial",{color:t,map:f,zoom:o,grayscale:s,opacity:u,scale:x,imageBounds:m,resolution:i,radius:d,toneMapped:v,transparent:y,side:l,key:te.key}),e)}),Ae=a.forwardRef(({url:e,...t},n)=>{const r=L(e);return a.createElement(me,O({},t,{texture:r,ref:n}))}),Te=a.forwardRef(({url:e,...t},n)=>a.createElement(me,O({},t,{ref:n}))),Pe=a.forwardRef((e,t)=>{if(e.url)return a.createElement(Ae,O({},e,{ref:t}));if(e.texture)return a.createElement(Te,O({},e,{ref:t}));throw new Error("<Image /> requires a url or texture")}),F=(e,t)=>{e.updateRanges[0]=t},ze="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",re=new ue,U=new A,D=new N,ne=new A,ae=new N,k=new A,$=a.createContext(null),pe=a.forwardRef(({children:e,material:t=ge,texture:n=ze,range:r,limit:o=200,frustumCulled:s,...u},d)=>{var f,v;const y=a.useMemo(()=>class extends t{constructor(){super();const h=parseInt(ve.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=j=>{j.vertexShader=`attribute float cloudOpacity;
               varying float vOpacity;
              `+j.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = cloudOpacity;
                `),j.fragmentShader=`varying float vOpacity;
              `+j.fragmentShader.replace(`#include <${h}>`,`#include <${h}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[t]);se({CloudMaterial:y});const l=a.useRef(null),b=a.useRef([]),P=a.useMemo(()=>new Float32Array(Array.from({length:o},()=>1)),[o]),g=a.useMemo(()=>new Float32Array(Array.from({length:o},()=>[1,1,1]).flat()),[o]),M=L(n);let x=0,m=0,i;const c=new N,R=new A(0,0,1),C=new A;ie((h,j)=>{for(x=h.clock.elapsedTime,re.copy(l.current.matrixWorld).invert(),h.camera.matrixWorld.decompose(ne,ae,k),m=0;m<b.current.length;m++)i=b.current[m],i.ref.current.matrixWorld.decompose(U,D,k),U.add(C.copy(i.position).applyQuaternion(D).multiply(k)),D.copy(ae).multiply(c.setFromAxisAngle(R,i.rotation+=j*i.rotationFactor)),k.multiplyScalar(i.volume+(1+Math.sin(x*i.density*i.speed))/2*i.growth),i.matrix.compose(U,D,k).premultiply(re),i.dist=U.distanceTo(ne);for(b.current.sort((S,de)=>de.dist-S.dist),m=0;m<b.current.length;m++)i=b.current[m],P[m]=i.opacity*(i.dist<i.fade-1?i.dist/i.fade:1),l.current.setMatrixAt(m,i.matrix),l.current.setColorAt(m,i.color);l.current.geometry.attributes.cloudOpacity.needsUpdate=!0,l.current.instanceMatrix.needsUpdate=!0,l.current.instanceColor&&(l.current.instanceColor.needsUpdate=!0)}),a.useLayoutEffect(()=>{const h=Math.min(o,r!==void 0?r:o,b.current.length);l.current.count=h,F(l.current.instanceMatrix,{start:0,count:h*16}),l.current.instanceColor&&F(l.current.instanceColor,{start:0,count:h*3}),F(l.current.geometry.attributes.cloudOpacity,{start:0,count:h})});let E=[(f=M.image.width)!==null&&f!==void 0?f:1,(v=M.image.height)!==null&&v!==void 0?v:1];const z=Math.max(E[0],E[1]);return E=[E[0]/z,E[1]/z],a.createElement("group",O({ref:d},u),a.createElement($.Provider,{value:b},e,a.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:l,args:[null,null,o],frustumCulled:s},a.createElement("instancedBufferAttribute",{usage:Q,attach:"instanceColor",args:[g,3]}),a.createElement("planeGeometry",{args:[...E]},a.createElement("instancedBufferAttribute",{usage:Q,attach:"attributes-cloudOpacity",args:[P,1]})),a.createElement("cloudMaterial",{key:t.name,map:M,transparent:!0,depthWrite:!1}))))}),oe=a.forwardRef(({opacity:e=1,speed:t=0,bounds:n=[5,1,1],segments:r=20,color:o="#ffffff",fade:s=10,volume:u=6,smallestVolume:d=.25,distribute:f=null,growth:v=4,concentrate:y="inside",seed:l=Math.random(),...b},P)=>{function g(){const c=Math.sin(l++)*1e4;return c-Math.floor(c)}const M=a.useContext($),x=a.useRef(null),m=a.useId(),i=a.useMemo(()=>[...new Array(r)].map((c,R)=>({segments:r,bounds:new A(1,1,1),position:new A,uuid:m,index:R,ref:x,dist:0,matrix:new ue,color:new ce,rotation:R*(Math.PI/r)})),[r,m]);return a.useLayoutEffect(()=>{i.forEach((c,R)=>{he(c,{volume:u,color:o,speed:t,growth:v,opacity:e,fade:s,bounds:n,density:Math.max(.5,g()),rotationFactor:Math.max(.2,.5*g())*t});const C=f==null?void 0:f(c,R);if(C||r>1){var E;c.position.copy(c.bounds).multiply((E=C==null?void 0:C.point)!==null&&E!==void 0?E:{x:g()*2-1,y:g()*2-1,z:g()*2-1})}const z=Math.abs(c.position.x),h=Math.abs(c.position.y),j=Math.abs(c.position.z),S=Math.max(z,h,j);c.length=1,z===S&&(c.length-=z/c.bounds.x),h===S&&(c.length-=h/c.bounds.y),j===S&&(c.length-=j/c.bounds.z),c.volume=((C==null?void 0:C.volume)!==void 0?C.volume:Math.max(Math.max(0,d),y==="random"?g():y==="inside"?c.length:1-c.length))*u})},[y,n,s,o,e,v,u,l,r,t]),a.useLayoutEffect(()=>{const c=i;return M.current=[...M.current,...c],()=>{M.current=M.current.filter(R=>R.uuid!==m)}},[i]),a.useImperativeHandle(P,()=>x.current,[]),a.createElement("group",O({ref:x},b))}),Ie=a.forwardRef((e,t)=>a.useContext($)?a.createElement(oe,O({ref:t},e)):a.createElement(pe,null,a.createElement(oe,O({ref:t},e))));T.registerPlugin(le);const Se=({position:e,url:t})=>{const n=a.useRef();return ie((r,o)=>{n.current.rotation.y+=o*.1,n.current.rotation.x+=o*.05}),p.jsx(Pe,{ref:n,url:`/assets/logos/${t}.svg`,scale:1.5,position:e,transparent:!0})},ke=()=>{const e=G(r=>r.camera),t=a.useRef(),n=a.useMemo(()=>{const r=[],o=Ce(new Float32Array(5e3),{radius:10});for(let s=0;s<H.length;s++){const u=o[s*3],d=o[s*3+1],f=o[s*3+2];r.push({pos:new A(u,d,f),url:H[s]})}return r},[]);return a.useLayoutEffect(()=>{const r=T.context(()=>{T.to(e.position,{z:-12,scrollTrigger:{trigger:"#toolkit-journey",start:"top top",end:"bottom bottom",scrub:1.5}})});return()=>r.revert()},[e]),p.jsxs("group",{ref:t,children:[p.jsx(pe,{children:p.jsx(Ie,{segments:100,bounds:[15,10,25],volume:20,color:"white",opacity:.15})}),n.map((r,o)=>p.jsx(Se,{position:r.pos,url:r.url},o))]})};T.registerPlugin(le);const Be=()=>{const e=a.useRef(null),t=a.useRef(null);return a.useLayoutEffect(()=>{const n=T.context(()=>{t.current&&(T.from(t.current,{opacity:0,scrollTrigger:{trigger:e.current,start:"top 80%",end:"top top",scrub:1.5}}),T.to(t.current,{opacity:0,scrollTrigger:{trigger:e.current,start:"bottom bottom",end:"bottom top",scrub:1.5}}))},e);return()=>n.revert()},[]),p.jsx("section",{ref:e,id:"toolkit-journey",className:"relative w-full h-[400vh] bg-black",children:p.jsxs("div",{ref:t,className:"sticky top-0 flex flex-col items-center justify-center w-full h-screen overflow-hidden",children:[p.jsxs("div",{className:"absolute top-[20vh] text-center z-10 c-space",children:[p.jsx("h2",{className:"text-4xl font-bold md:text-6xl text-background",children:"The Toolkit"}),p.jsx("p",{className:"max-w-xl mx-auto mt-4 text-lg text-gray-300 md-text-xl",children:"Flying through the galaxy of technologies I use to build robust and scalable applications."})]}),p.jsx(ye,{camera:{position:[0,0,12],fov:75},children:p.jsxs(a.Suspense,{fallback:null,children:[p.jsx("fog",{attach:"fog",args:["#000000",15,25]}),p.jsx("ambientLight",{intensity:1.5}),p.jsx("pointLight",{position:[0,0,15],intensity:100,color:"#A5B4FC"}),p.jsx(ke,{})]})})]})})};export{Be as default};
